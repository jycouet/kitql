/**
 * This file was generated by 'vite-plugin-kit-routes'
 *
 *      >> DO NOT EDIT THIS FILE MANUALLY <<
 */

/**
 * PAGES
 */
const PAGES = {
	'/': `/`,
	'/base': (params?: { all?: string | number }) => {
		return `/base${params?.['all'] ? `/${params?.['all']}` : ''}`
	},
	'/subGroup': `/subGroup`,
	'/subGroup/user': `/subGroup/user`,
	'/subGroup2': (params: { first: string | number }) => {
		return `/subGroup2${appendSp({ first: params['first'] })}`
	},
	'/contract': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/contract`
	},
	'/contract/[id]': (params: { id: string | number; lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/contract/${params['id']}`
	},
	'/gp/one': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/gp/one`
	},
	'/gp/two': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/gp/two`
	},
	'/main': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/main`
	},
	'/match/[id=ab]': (params: {
		id: ExtractParamType<typeof import('../params/ab.ts').match>
		lang?: 'fr' | 'en' | 'hu' | 'at' | string
	}) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/match/${params['id']}`
	},
	'/match/[id=int]': (params: { id: number; lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/match/${params['id']}`
	},
	'/site': (
		params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string; limit?: number },
		sp?: Record<string, string | number>,
	) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site${appendSp({ ...sp, limit: params?.['limit'] })}`
	},
	'/site/[id]': (params?: {
		lang?: 'fr' | 'hu' | undefined
		id?: string
		limit?: number
		demo?: string
		'da-sh'?: string
	}) => {
		params = params ?? {}
		params['lang'] = params['lang'] ?? 'fr'
		params['id'] = params['id'] ?? 'Vienna'
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site/${params['id']}${appendSp({ limit: params['limit'], demo: params['demo'], 'da-sh': params['da-sh'] })}`
	},
	'/site_contract/[siteId]-[contractId]': (params: {
		siteId: string | number
		contractId: string | number
		lang?: 'fr' | 'en' | 'hu' | 'at' | string
		limit?: number
	}) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site_contract/${params['siteId']}-${params['contractId']}${appendSp({ limit: params['limit'] })}`
	},
	'/[u+d83e][u+dd2a]': `/ðŸ¤ª`,
	'/[u+d83e][u+dd2a]/[emoji]/[u+2b50]': (params: { emoji: string | number }) => {
		return `/ðŸ¤ª/${params['emoji']}/â­`
	},
	'/[x+2e]well-known': `/.well-known`,
	'/a/[...rest]/z': (params: { rest: (string | number)[] }) => {
		return `/a/${params['rest']?.join('/')}/z`
	},
	'/anchors': (params: {
		hash: 'section0' | 'section1' | 'section2' | 'section3'
		anotherOne?: string
	}) => {
		params['hash'] = params['hash'] ?? 'section0'
		return `/anchors${appendSp({ anotherOne: params['anotherOne'], __KIT_ROUTES_ANCHOR__: params['hash'] })}`
	},
	'/anchors/[id]': (params: {
		id: string | number
		hash?: 'section0' | 'section1' | 'section2' | 'section3'
	}) => {
		return `/anchors/${params['id']}${appendSp({ __KIT_ROUTES_ANCHOR__: params['hash'] })}`
	},
	'/lay/normal': `/lay/normal`,
	'/lay/root-layout': `/lay/root-layout`,
	'/lay/skip': `/lay/skip`,
	'/md': `/md`,
	'/mdsvex': `/mdsvex`,
	'/sp': (sp?: Record<string, string | number>) => {
		return `/sp${appendSp(sp)}`
	},
	'/spArray': (params: { ids: number[] }) => {
		return `/spArray${appendSp({ ids: params['ids'] })}`
	},
	'/spArrayComma': (params: { ids: number[] }) => {
		return `/spArrayComma${appendSp({ ids: String(params['ids']) })}`
	},
}

/**
 * SERVERS
 */
const SERVERS = {
	'GET /server_func_get': `/server_func_get`,
	'GET /server_func_get_and_': `/server_func_get_and_`,
	'POST /server_func_post': `/server_func_post`,
	'GET /contract': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/contract`
	},
	'POST /contract': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/contract`
	},
	'GET /site': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site`
	},
	'GET /[x+2e]well-known': `/.well-known`,
	'GET /api/graphql': `/api/graphql`,
	'POST /api/graphql': `/api/graphql`,
	'GET /data/errors/[locale].json': (params: { locale: string | number }) => {
		return `/data/errors/${params['locale']}.json`
	},
}

/**
 * ACTIONS
 */
const ACTIONS = {
	'default /contract/[id]': (params: {
		id: string | number
		lang?: 'fr' | 'en' | 'hu' | 'at' | string
		limit?: number
	}) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/contract/${params['id']}${appendSp({ limit: params['limit'] })}`
	},
	'create /site': (params?: {
		lang?: 'fr' | 'en' | 'hu' | 'at' | string
		redirectTo?: 'list' | 'new' | 'detail'
	}) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site?/create${appendSp({ redirectTo: params?.['redirectTo'] }, '&')}`
	},
	'u-p-d-a-t-e /site': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site?/u-p-d-a-t-e`
	},
	'update /site/[id]': (params: {
		id: string | number
		lang?: 'fr' | 'en' | 'hu' | 'at' | string
	}) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site/${params['id']}?/update`
	},
	'delete /site/[id]': (params: {
		id: string | number
		lang?: 'fr' | 'en' | 'hu' | 'at' | string
	}) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site/${params['id']}?/delete`
	},
	'noSatisfies /site_contract': (params?: { lang?: 'fr' | 'en' | 'hu' | 'at' | string }) => {
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site_contract?/noSatisfies`
	},
	'send /site_contract/[siteId]-[contractId]': (params: {
		siteId: string | number
		contractId: string | number
		lang?: 'fr' | 'en' | 'hu' | 'at' | string
		extra?: 'A' | 'B'
	}) => {
		params['extra'] = params['extra'] ?? 'A'
		return `${params?.['lang'] ? `/${params?.['lang']}` : ''}/site_contract/${params['siteId']}-${params['contractId']}?/send${appendSp({ extra: params['extra'] }, '&')}`
	},
}

/**
 * LINKS
 */
const LINKS = {
	bluesky: `https://bsky.app/profile/jyc.dev`,
	bluesky_post: (params: { did: string | number; post_id: string | number }) => {
		return `https://bsky.app/profile/${params['did']}/post/${params['post_id']}`
	},
	gravatar: (params: { str: string; s?: number; d?: 'retro' | 'identicon' }) => {
		params['s'] = params['s'] ?? 75
		params['d'] = params['d'] ?? 'identicon'
		return `https://www.gravatar.com/avatar/${params['str']}${appendSp({ s: params['s'], d: params['d'] })}`
	},
	default_values_site: (params: {
		sBooleanRequired: boolean
		sArrayRequired: Array<boolean | string | number | null>
		bool?: boolean
		arr?: Array<boolean | string | number | null>
		sNumber?: number
		sBoolean?: boolean
		sArray?: Array<boolean | string | number | null>
	}) => {
		params['sBooleanRequired'] = params['sBooleanRequired'] ?? 'mooo'
		params['sArrayRequired'] = params['sArrayRequired'] ?? [true, 'p2', 3, null]
		params['bool'] = params['bool'] ?? true
		params['arr'] = params['arr'] ?? [true, 'p2', 3, null]
		params['sNumber'] = params['sNumber'] ?? 75
		params['sBoolean'] = params['sBoolean'] ?? false
		params['sArray'] = params['sArray'] ?? [true, 'p2', 3, null]
		return `https://sommepage.com/${params['bool']}/${params['arr']}${appendSp({ sNumber: params['sNumber'], sBoolean: params['sBoolean'], sBooleanRequired: params['sBooleanRequired'], sArray: params['sArray'], sArrayRequired: params['sArrayRequired'] })}`
	},
}

type ParamValue = string | number | boolean | null | undefined

/**
 * Append search params to a string
 */
export const appendSp = (
	sp?: Record<string, ParamValue | ParamValue[]>,
	prefix: '?' | '&' = '?',
) => {
	if (sp === undefined) return ''

	const params = new URLSearchParams()
	const append = (n: string, v: ParamValue) => {
		if (v !== undefined) {
			params.append(n, String(v))
		}
	}

	let anchor = ''
	for (const [name, val] of Object.entries(sp)) {
		if (name === '__KIT_ROUTES_ANCHOR__' && val !== undefined) {
			anchor = `#${val}`
			continue
		}
		if (Array.isArray(val)) {
			for (const v of val) {
				append(name, v)
			}
		} else {
			append(name, val)
		}
	}

	const formatted = params.toString()
	if (formatted || anchor) {
		return `${prefix}${formatted}${anchor}`.replace('?#', '#')
	}
	return ''
}

/**
 * get the current search params
 *
 * Could be use like this:
 * ```
 * route("/cities", { page: 2 }, { ...currentSP() })
 * ```
 */
export const currentSp = () => {
	const params = new URLSearchParams(window.location.search)
	const record: Record<string, string> = {}
	for (const [key, value] of params.entries()) {
		record[key] = value
	}
	return record
}

/* type helpers for route function */
type NonFunctionKeys<T> = { [K in keyof T]: T[K] extends Function ? never : K }[keyof T]
type FunctionKeys<T> = { [K in keyof T]: T[K] extends Function ? K : never }[keyof T]
type FunctionParams<T> = T extends (...args: infer P) => any ? P : never

const AllObjs = { ...PAGES, ...ACTIONS, ...SERVERS, ...LINKS }
type AllTypes = typeof AllObjs

export type Routes = keyof AllTypes extends `${string}/${infer Route}`
	? `/${Route}`
	: keyof AllTypes
export const routes = [
	...new Set(Object.keys(AllObjs).map((route) => /^\/.*|[^ ]?\/.*$/.exec(route)?.[0] ?? route)),
] as Routes[]

/**
 * To be used like this:
 * ```ts
 * import { route } from '$lib/ROUTES'
 *
 * route('site_id', { id: 1 })
 * ```
 */
export function route<T extends FunctionKeys<AllTypes>>(
	key: T,
	...params: FunctionParams<AllTypes[T]>
): string
export function route<T extends NonFunctionKeys<AllTypes>>(key: T): string
export function route<T extends keyof AllTypes>(key: T, ...params: any[]): string {
	if ((AllObjs[key] as any) instanceof Function) {
		const element = (AllObjs as any)[key] as (...args: any[]) => string
		return element(...params)
	} else {
		return AllObjs[key] as string
	}
}

/* type helpers param & predicate */
type ExtractFnPredicate<T> = T extends (param: any) => param is infer U ? U : never
type ExtractParamType<T extends (param: any) => any> =
	ExtractFnPredicate<T> extends never ? Parameters<T>[0] : ExtractFnPredicate<T>

/**
 * Add this type as a generic of the vite plugin `kitRoutes<KIT_ROUTES>`.
 *
 * Full example:
 * ```ts
 * import type { KIT_ROUTES } from '$lib/ROUTES'
 * import { kitRoutes } from 'vite-plugin-kit-routes'
 *
 * kitRoutes<KIT_ROUTES>({
 *  PAGES: {
 *    // here, key of object will be typed!
 *  }
 * })
 * ```
 */
export type KIT_ROUTES = {
	PAGES: {
		'/': never
		'/base': 'all'
		'/subGroup': never
		'/subGroup/user': never
		'/subGroup2': never
		'/contract': 'lang'
		'/contract/[id]': 'id' | 'lang'
		'/gp/one': 'lang'
		'/gp/two': 'lang'
		'/main': 'lang'
		'/match/[id=ab]': 'id' | 'lang'
		'/match/[id=int]': 'id' | 'lang'
		'/site': 'lang'
		'/site/[id]': 'lang' | 'id'
		'/site_contract/[siteId]-[contractId]': 'siteId' | 'contractId' | 'lang'
		'/[u+d83e][u+dd2a]': never
		'/[u+d83e][u+dd2a]/[emoji]/[u+2b50]': 'emoji'
		'/[x+2e]well-known': never
		'/a/[...rest]/z': 'rest'
		'/anchors': never
		'/anchors/[id]': 'id'
		'/lay/normal': never
		'/lay/root-layout': never
		'/lay/skip': never
		'/md': never
		'/mdsvex': never
		'/sp': never
		'/spArray': never
		'/spArrayComma': never
	}
	SERVERS: {
		'GET /server_func_get': never
		'GET /server_func_get_and_': never
		'POST /server_func_post': never
		'GET /contract': 'lang'
		'POST /contract': 'lang'
		'GET /site': 'lang'
		'GET /[x+2e]well-known': never
		'GET /api/graphql': never
		'POST /api/graphql': never
		'GET /data/errors/[locale].json': 'locale'
	}
	ACTIONS: {
		'default /contract/[id]': 'id' | 'lang'
		'create /site': 'lang'
		'u-p-d-a-t-e /site': 'lang'
		'update /site/[id]': 'id' | 'lang'
		'delete /site/[id]': 'id' | 'lang'
		'noSatisfies /site_contract': 'lang'
		'send /site_contract/[siteId]-[contractId]': 'siteId' | 'contractId' | 'lang'
	}
	LINKS: {
		bluesky: never
		bluesky_post: 'did' | 'post_id'
		gravatar: 'str'
		default_values_site: 'bool' | 'arr'
	}
	Params: {
		all: never
		first: never
		lang: never
		id: never
		limit: never
		demo: never
		'da-sh': never
		siteId: never
		contractId: never
		emoji: never
		rest: never
		hash: never
		anotherOne: never
		ids: never
		locale: never
		redirectTo: never
		extra: never
		did: never
		post_id: never
		str: never
		s: never
		d: never
		sBooleanRequired: never
		sArrayRequired: never
		bool: never
		arr: never
		sNumber: never
		sBoolean: never
		sArray: never
	}
}
